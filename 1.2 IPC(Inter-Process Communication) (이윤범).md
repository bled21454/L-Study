# IPC (Inter-Process Communication)
프로세스는 독립된 실행 객체로 서로다른 주소공간에서 실행 
띠라서, 프로세스간 서로 영향을 받지 않지만 별도의 장치없이 서로 통신이 어려움  
리눅스 커널은 프로세스간 통신위한 다양한 IPC 제공  
안드로이드는 안드로이드 고유의 IPC인 바인더를 주로 사용하지만, 다른 IPC 또한 사용  

## 안드로이드 프로세스
- init 프로세스는 pid가 1인 프로세스
- ppid가 1인 프로세스는 init프로세스에 의해 생성된 데몬 프로세스
- 데몬 프로세스는 init프로세스가 fork()함수 및 exec()함수 호출하여 새로운 데몬 프로세스 생성
- pid, ppid 추가 설명 : https://jammdev.tistory.com/140

## 프로세스의 fork() 및 exec() 함수
유닉스와 리눅스에서 새로운 프로세스 만드는 함수는 fork() 함수가 유일 
fork() 함수는 두 가지 경우에 사용  
1. 서버 프로세스가 클라이언트 프로세스 요청 처리위해 자신복사하여 worker프로세스 만들때 사용
2. _새로운 프로그램 생성할 때 사용_

### fork() 함수 특징
- 부모 프로세스의 데이터 영역 복사하여 프로세스를 메모리에 할당
- fork() 함수가 호출되면 부모프로세스의 텍스트, 데이터, BSS 세그먼트, 힙 등의 유저스텍은 자식 프로세스의 가상메모리에 똑같이 복사
- 하지만 서로다른 pid를 갖아 부모와 동일한 코드를 실행하지만 부모와 다른 실행흐름 가질 수 있음 

### exec() 함수 특징
- exec() 함수는 현재 프로그램의 텍스트, 데이터 등의 스택영역에 exec() 함수의 인자로 전달된 텍스트, 데이터 등의 스택영역을 오버라이트하는 함수

### 참고 - 프로세스 구조
https://velog.io/@gndan4/OS-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EA%B5%AC%EC%A1%B0


## 리눅스 커널의 IPC
종류  
- Pipe
- Message Queue
- Shared Memory
- Memory Map
- Semaphore
- Socket  
안드로이드는 파이프와 소켓 주로 사용

### 리눅스 파이프(Pipe)
- 반이중(Half-Duplex) 통신만 제공 => 따라서 두개 필요
- 파이프는 부모 자식 프로세스간의 통신 또는 동일 부모갖는 프로세스간의 통신에서만 사용 가능
- 왜냐면, 파이프의 파일 기술자는 다른 프로세스와 공유 불가능

### 인터넷 소켓(Socket)
생략  

### 유닉스 도메인 소켓(Unix domain Socket)
- 유닉스 도메인 소켓은 소켓API 수정 필요없이 동일한 시스템내의 파일시스템 이용하여 내부 프로세스간의 통신지원
- 유닉스 도메인 소켓은 내부 프로세스간 통신위한 소켓
- 양방향 통신이 가능
- 인터넷 소켓이 TCP/IP 4계층 모두 통과하며 네트워크로 전달되는 것과 달리, 유닉스 도메인 소켓은 TCP계층 까지만 메시지 전달
- 유닉스 도메인 소켓은 IP주소와 포트번호 대신 파일을 공유
- 공유되는 파일에 실제 읽고 쓰는 일은 발생하지않고 커널이 대신 중계

  

